matrix:
  include:
    - language: node_js
      addons:
        sonarcloud:
          organization: "swsnu"
          token:
            secure: "aB6wC/+IKI9klJ/ZybfXZxzst0imT93P3rP/8CMrUl43dmyQj7RgiF4iVyiXuGuzKjIVc1zOcXN1/wy1kdZmSCKjtWbeyR8oQ4hwv1w1cYkA3f1stFCAQm9J93vkp930YNulv/nFwEl+uLkgAfMDCI1b1AykYso/bBhRXCR/slyW1ayVot1JMSvqYU8+cFX7oufSN4FRhbo8cUPW8brmkxNWAn85taDFkb81TRfSOjGbuyYWlGfFSmj6zOivstPJCaYaJopBQDy0SnLPGZuCgMJ0q0VZFbsTIBCq02bjgmCf8CyJdOQqZ4eQiOlw4anm8tC63gknn6IiDuRvCk0P164uLaTrJNjGmq6EUmzGb7HQITpEajCJVBD4sO1I1Yd/n7xpZs5kr65e+K3yiRcotlZ99LJieEIjZxFmjZoo9S3mVptrbANCLwEqgHDL8m7uxOdn3AEIpQQDXs5GvdoD5U6p8YvnvSCOs5UyaOM2yIX5h3rG0QfMPFnlccGiB7ssvrCfXUo/vp+tzPcvcMQi84xglxqnk1QtO6MZirFTbki+sbp64RbbLmYKeeRC6gmeO20wG6iY8wMNj+XUS2legSRJQp8xUZUdMTQMFRdtSrguEWC/RC38pIsK933UWnW7rj1fJYF1tu1G/eyBR4LjUQ7jplBlHiqkBqsTcyeeN3M="

      node_js: '12'
      cache:
        - yarn: true
      before_install:
        - cd frontend/caffeine
      install:
        - yarn install
      script:
        - ./node_modules/.bin/eslint src/
        - yarn test --coverage --watchAll=false
        - cd ..
        - sonar-scanner

    - language: python
      python: '3.7'
      cache:
        - pip: true
      before_install:
        - cd backend/caffeine
      install:
        - pip install -r requirements.txt
      script:
        - pylint **/*.py --load-plugins pylint_django
        - coverage run --source='.' manage.py test
        - coverage xml