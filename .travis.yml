matrix:
  include:
    - language: node_js
      addons:
        sonarcloud:
          organization: "swsnu"
          token:
            secure: "0OTA+1XhuIibVzvJnXAEZKnvGPIXa6TuQhVrHSfw5nUOBPyYrRGTMOTGPOjhFkdMHa4QYwE9fKdZAzPRQK8BqnI9PPxtW4yu+Ii4LJI6tXUNeQb9GEW8/Q+KHoaHovwO7vJR6rQFpQEWj0Mp2QL1D0+TPRyAX0BI9zeUSTCq6gAcS6KdhFtVKTwrEn88YrnrD0j8Lqzu0i2pCIsbLEyz3+Y80nDHiAnhjAZDfQEx+hxhUacPx/n5KFqZcZ3lcEdhON5+xBGfhqwAPjmLd+R0NDPNwYFM9FI6Xwts3On9G/S007NsR5fyAQQQEwuzChaotoCorOjZbS/8d6FLc13NrylnIRG9SwZcV/bQSFqa5i/hElUauL9FXYXzXpm3YewtxF7eNkcwcL29mzAE5TkLdEbaECZomIbW3EaRTGZcZ0TMUVkesRTpfo5T4Ox0LQ3TXtvWT3py0FAHn3yBTErAXh9XQCLi3AnLHp1C3QY+F5MMXrfUTWVpPt4ohWW9F4TjzsLSshKNHq9je1uUqzz3A2NUw5s0fOGU4A4NsRSEghvSwAAmPTRhahpfFRzRF6g3uMrZYJwShPPw1zjbYuFyNxgZKCpXCIahgSXOck39IATaIUXeZT4qQ5fVlDIHt/kmmEmEMWnHJBcNEPkh4K7xXMxIPO+DFg/UzOIt7lljAdo="
      node_js: '12'
      cache:
        -  yarn: true
      before_install:
        -  cd frontend/caffeine
      install:
        - yarn install
      script:
        - ./node_modules/.bin/eslint src/
        - yarn test --coverage --watchAll=false
        - cd .. & cd ..
        - sonar-scanner

    - language: python
      python: '3.7'
      cache:
        - pip: true
      before_install:
        - cd backend/caffeine
      install:
        - pip install -r requirements.txt
      script:
        - pylint **/*.py --load-plugins pylint_django
        - coverage run --source='.' manage.py test
        - coverage xml